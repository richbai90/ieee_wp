"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t=function t(){_classCallCheck(this,t);var a=void 0,i=void 0,n=void 0;e("body").on("click","#opal-frontend-campaign-form a.osf-button-media",function(t){t.preventDefault(),t.preventDefault();var i=e(this);if(a)return void a.open();wp.media.view.settings.post.id=0,a=wp.media({title:osf_media.choose_featured_img,button:{text:osf_media.choose_file}}),a.on("select",function(){a.state().get("selection").map(function(e){e=e.toJSON(),i.siblings("input.featured-image").val(e.id);var t=i.closest(".instruction-inside"),a=t.siblings(".image-wrap");a.find("img").attr("src",e.url),a.find("img").removeAttr("srcset"),t.addClass("hide"),a.removeClass("hide")})}),a.open()}).on("click","#opal-frontend-campaign-form .campaign-gallery a.add-gallery-images",function(t){t.preventDefault();var a=e(t.currentTarget),n=a.closest(".campaign-gallery");if(wp.media.view.settings.post.id=0,i)return void i.open();i=wp.media({title:osf_media.choose_featured_img,button:{text:osf_media.choose_file},multiple:!0}),i.on("select",function(){i.state().get("selection").map(function(t){t=t.toJSON(),t.id&&e('<li class="image">\n                                        <img src="'+t.url+'" />\n                                        <a href="#" class="action-delete">&times;</a>\n                                        <input type="hidden" name="gallery['+t.id+']" value="'+t.url+'">\n                                    </li>').insertBefore(n.find("li.add-image"))})}),i.open()}).on("click","#opal-frontend-campaign-form .campaign-gallery .action-delete",function(t){t.preventDefault(),e(t.currentTarget).closest(".image").remove()}).on("click","#opal-frontend-campaign-form a.remove-feat-image",function(t){t.preventDefault();var a=e(this),i=a.closest(".image-wrap"),n=i.siblings(".instruction-inside");n.find("input.featured-image").val("0"),i.addClass("hide"),n.removeClass("hide")}).on("click",".opal-give-button-edit-avatar",function(t){console.log(t.currentTarget),t.preventDefault();var a=e(t.currentTarget),i=a.closest(".profile-avatar");if(n)return void n.open();wp.media.view.settings.post.id=0,n=wp.media({title:osf_media.choose_featured_img,button:{text:osf_media.choose_file}}),n.on("select",function(){n.state().get("selection").map(function(t){t=t.toJSON(),i.addClass("loading"),i.find(".avatar").attr("src",t.sizes["fundor-avatar"].url).removeAttr("srcset"),e.ajax({type:"POST",url:osf_media.ajaxurl,data:{action:"opal_give_creator_avatar",avatar_id:t.id},dataType:"json",success:function(e){console.log(e)},complete:function(){i.removeClass("loading")}})})}),n.open()})};e(document).ready(function(){new t})}(jQuery);
//# sourceMappingURL=main.js.map
