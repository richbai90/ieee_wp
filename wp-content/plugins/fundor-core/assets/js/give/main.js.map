{"version":3,"sources":["before.js","main.js","after.js"],"names":["$","Opal_Give","_this","this","_classCallCheck","document","on","event","video","gallery","confirm","fundor","delete_post","preventDefault","gallery_single","single_tabs","_createClass","key","value","_this2","$button","currentTarget","data","ajax","method","url","ajaxurl","action","give_id","beforeSend","addClass","response","$video","find","fixedContentPos","success","disableOn","type","mainClass","removalDelay","preloader","$gallery","magnificPopup","removeClass","delegate","enabled","$parent","remove","form_id","html","tLoading","navigateByImgClick","preload","image","tError","titleSrc","item","$tabs","isInView","$el","docViewTop","window","scrollTop","docViewBottom","height","elemTop","offset","top","elemBottom","customArc","xloc","yloc","total","R","path","alpha","a","Math","PI","x","cos","y","sin","drawBarometer","$barometer","r","width","progress_val","progress","attr","stroke-width","animate","arc","opacity","initBarometer","circle","stroke","Raphael","parent","drawn","init","$barometers","each","barometer","load","jQuery"],"mappings":"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","file":"main.js","sourcesContent":["(function ($) {","class Opal_Give {\n    constructor() {\n        $(document).on('click', '[data-toogle=\"fundor-video\"]', (event) => {\n            this.video(event);\n        })\n        $(document).on('click', '[data-toogle=\"fundor-gallery\"]', (event) => {\n            this.gallery(event);\n        })\n\n        $(document).on('click', '.delete-campaign', (event) => {\n            var result = confirm(fundor.confirm);\n            if (result) {\n                this.delete_post(event);\n            }else {\n                event.preventDefault();\n            }\n        })\n        this.gallery_single();\n        this.single_tabs();\n    }\n\n    video(event) {\n        event.preventDefault();\n        let $button = $(event.currentTarget);\n        if ($button.data('loaded')) {\n            $button.find('.ajax-fundor-video a').trigger('click');\n        } else {\n            $.ajax({\n                method: 'POST',\n                url: fundor.ajaxurl,\n                data: {\n                    action: 'get_fundor_video',\n                    give_id: $button.data('fundor-id'),\n                },\n                beforeSend: () => {\n                    $button.addClass('loading');\n                },\n                success: (response) => {\n                    $button.data('loaded', true);\n                    if (response) {\n                        $button.append(this.renderVideoHTML(response));\n                        let $video = $button.find('.ajax-fundor-video a');\n                        $video.magnificPopup({\n                            disableOn: 700,\n                            type: 'iframe',\n                            mainClass: 'mfp-fade',\n                            removalDelay: 160,\n                            preloader: false,\n                            fixedContentPos: false\n                        });\n                        $video.trigger('click');\n                    }\n                    $button.removeClass('loading');\n                }\n            })\n        }\n    }\n\n    gallery(event) {\n        event.preventDefault();\n        let $button = $(event.currentTarget);\n        if ($button.data('loaded')) {\n            $button.find('.ajax-fundor-gallery a:first-child').trigger('click');\n        } else {\n            $.ajax({\n                method: 'POST',\n                url: fundor.ajaxurl,\n                data: {\n                    action: 'get_fundor_gallery',\n                    give_id: $button.data('fundor-id'),\n                },\n                beforeSend: () => {\n                    $button.addClass('loading');\n                },\n                success: (response) => {\n                    $button.data('loaded', true);\n                    if (response) {\n                        $button.append(this.renderGalleryHTML(response));\n                        let $gallery = $button.find('.ajax-fundor-gallery');\n                        $gallery.magnificPopup({\n                            delegate: 'a', // the selector for gallery item\n                            type: 'image',\n                            gallery: {\n                                enabled: true\n                            }\n                        });\n                        $gallery.find('>a:first-child').trigger('click');\n                    }\n                    $button.removeClass('loading');\n                }\n            })\n        }\n    }\n\n    delete_post(event) {\n        event.preventDefault();\n        let $button = $(event.currentTarget),\n            $parent = $button.closest('.profile-campaign__item');\n        if ($button.data('form_id')) {\n            $.ajax({\n                method: 'POST',\n                url: fundor.ajaxurl,\n                data: {\n                    action: 'opal_give_delete_campaign',\n                    form_id: $button.data('form_id'),\n                },\n                beforeSend: () => {\n                    $button.addClass('loading');\n                },\n                success: (response) => {\n                    if (response) {\n                        $parent.remove();\n                    }\n                }\n            })\n        }\n\n    }\n\n    renderVideoHTML(video) {\n        return `<div class=\"ajax-fundor-video\"><a href=\"${video}\"></a></div>`;\n    }\n\n    renderGalleryHTML(listImages) {\n        let html = `<div class=\"ajax-fundor-gallery\">`\n        for (let i in listImages) {\n            html += `<a href=\"${listImages[i]}\"><img src=\"${listImages[i]}\"></a>`;\n        }\n        html += '</div>';\n        return html;\n    }\n\n    gallery_single() {\n        $('.single-give_forms .gallery').magnificPopup({\n            delegate: 'a',\n            type: 'image',\n            tLoading: 'Loading image #%curr%...',\n            mainClass: 'mfp-img-mobile',\n            gallery: {\n                enabled: true,\n                navigateByImgClick: true,\n                preload: [0, 1]\n            },\n            image: {\n                tError: '<a href=\"%url%\">The image #%curr%</a> could not be loaded.',\n                titleSrc: function (item) {\n                    return item.el.attr('title');\n                }\n            }\n        });\n    }\n\n    single_tabs() {\n        let $tabs = $(\"#give-form-single-tab\");\n        if ($tabs.length > 0) {\n            $tabs.tabs();\n        }\n    }\n}\n\n$(document).ready(function () {\n    new Opal_Give();\n});\n\nvar Barometer = new Object(function () {\n\n    var $barometers = $('.barometer'),\n\n        isInView = function ($el) {\n            var docViewTop = $(window).scrollTop(),\n                docViewBottom = docViewTop + $(window).height(),\n                elemTop = $el.offset().top,\n                elemBottom = elemTop + $el.height();\n\n            return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)\n                && (elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n        },\n\n        customArc = function (xloc, yloc, value, total, R) {\n            var alpha = 360 / total * value,\n                a = (90 - alpha) * Math.PI / 180,\n                x = xloc + R * Math.cos(a),\n                y = yloc - R * Math.sin(a),\n                path;\n\n            if (total == value) {\n                path = [\n                    [\"M\", xloc, yloc - R],\n                    [\"A\", R, R, 0, 1, 1, xloc - 0.01, yloc - R]\n                ];\n            } else {\n                path = [\n                    [\"M\", xloc, yloc - R],\n                    [\"A\", R, R, 0, +(alpha > 180), 1, x, y]\n                ];\n            }\n            return {\n                path: path\n            };\n        },\n\n        // Draws a barometer\n        drawBarometer = function ($barometer, r, width, height, progress_val) {\n            var progress;\n\n            // Draw the percentage filled arc\n            if (progress_val > 0) {\n                progress = r.path().attr({\n                    stroke: $barometer.data('progress-stroke'),\n                    'stroke-width': $barometer.data('strokewidth') + 1,\n                    arc: [width / 2, height / 2, 0, 100, (width / 2) - 8]\n                });\n\n                // Animate it\n                progress.animate({\n                    arc: [width / 2, height / 2, progress_val, 100, (width / 2) - 8]\n                }, 1500, \"easeInOut\", function () {\n                    $barometer.find('span').animate({opacity: 1}, 300, 'linear');\n                });\n            }\n        },\n\n        // Init barometer\n        initBarometer = function ($barometer) {\n            var width = $barometer.data('width'),\n                height = $barometer.data('height'),\n                r = Raphael($barometer[0], width, height),\n                drawn = false,\n                progress_val = $barometer.data('progress') > 100 ? 100 : $barometer.data('progress'),\n                circle;\n\n            // @see http://stackoverflow.com/questions/5061318/drawing-centered-arcs-in-raphael-js\n            r.customAttributes.arc = customArc;\n\n            // Draw the main circle\n            circle = r.path().attr({\n                stroke: $barometer.data('stroke'),\n                'stroke-width': $barometer.data('strokewidth'),\n                arc: [width / 2, height / 2, 0, 100, (width / 2) - 8]\n            });\n\n            // Fill the main circle\n            $barometer.parent().addClass('barometer-added');\n            circle.animate({arc: [width / 2, height / 2, 100, 100, (width / 2) - 8]}, 1000, function () {\n                if (progress_val === 0) {\n                    $barometer.find('span').animate({opacity: 1}, 500, 'linear');\n                }\n            });\n\n            if (isInView($barometer)) {\n                drawBarometer($barometer, r, width, height, progress_val);\n\n                drawn = true;\n            } else {\n                $(window).scroll(function () {\n                    if (drawn === false && isInView($barometer)) {\n                        drawBarometer($barometer, r, width, height, progress_val);\n\n                        drawn = true;\n                    }\n                });\n            }\n        };\n\n    return {\n\n        init: function () {\n            $barometers.each(function () {\n                initBarometer($(this));\n            });\n        },\n\n        getBarometers: function () {\n            return $barometers;\n        },\n\n        _drawBarometer: function (barometer, r, width, height, progress_val) {\n            drawBarometer(barometer, r, width, height, progress_val);\n        }\n    }\n\n})();\n\n$(window).load(function () {\n    Barometer.init();\n})","})(jQuery);"]}